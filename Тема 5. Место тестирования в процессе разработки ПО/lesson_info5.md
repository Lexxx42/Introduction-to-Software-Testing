# Модуль 5. Место тестирования в процессе разработки программного обеспечения

## В каскадной («водопадной») модели

В 1970 году Винстоном Ройсом была опубликована статья «Managing the
development of large software systems». В этой статье (как следует из названия) автор
рассказывал о том, как можно организовать процесс разработки сложного программного
обеспечения. Предлагаемый процесс выглядел следующим образом: предполагалось, что
вначале создаются системные требования, далее на их основании появляются требования
на ПО, на следующем шаге они подвергаются анализу, затем создается программный дизайн,
после чего начинается кодирование, дальше тестирование, а завершается весь процесс
передачей продукта в эксплуатацию. Посмотрев на описание этого процесса можно
обратить внимание на то, что тестирование выделено в отдельный блок, следующий сразу
за кодированием (предполагалось, что к началу этой фазы все программные компоненты
завершены).

Стоит отметить, что процесс разработки ПО строго в таком виде неоднократно
подвергался критике. В некоторых организациях количество требований становились
настолько большим, что кодирование превращалось в крайне сложную задачу, а
тестирование и эксплуатация становились тяжело выполнимыми.

Проблема заключалась в том, что описанный ранее процесс запомнился
большинству читавших статью. Но в этой же самой статье автор предупреждал о том, что в
«чистом» виде процесс может быть опасен. Для того, чтобы избежать возможных проблем
при создании ПО, Винстон Ройс предлагал:

+ Выполнять описанный цикл как минимум дважды (Do it twice);
+ Планировать, контролировать о отслеживать тестирование (Plan, control and monitor
  testing);
+ Вовлекать заказчика (Involve the customer).

Тем самым, рассматриваемая статья (прочитать которую будет вашим домашним
заданием) предвосхитила появление следующей группы подходов, возникшей в 1980-е
годы.

## В итеративной разработке

Отличие итеративной модели от каскадной заключается в том, что цикл из
проектирования, анализа и дизайна, разработки, тестирования и эволюции ПО проходит
несколько раз перед тем, как ПО передается в пользование заказчику. Процесс перестает
быть однонаправленным, перед отгрузкой появляется несколько фаз тестирования,
согласованных с заказчиком. В подобном процессе мы вновь видим тестирование как
отдельный блок, выполняемый в каждой итерации.

Итеративная модель послужила одним их факторов для появления группы практик,
возникших в следующее десятилетие.

## В гибких методологиях

Первая половина 90-х годов ознаменовалась появлением так называемых
«легковесных» практик. Важно понимать, что подобных практик было много. Одними из
сохранивших популярность стали Scrum (1995) и Extreme programming (1996). Создатели
подобных практик предлагали их использование различным компаниям и наблюдали за тем,
как компании реализуют предлагаемые подходы.

В 2001-м году группа из 17 авторов различных подходов собралась в городе
Snowbird, штат Юта для того, чтобы найти ответ на следующий вопрос: «Почему в одних
компаниях легковесные практики приживаются и работают, а в других – нет?». На
основании обсуждения появился документ, который был назван «Agile-манифест
разработки программного обеспечения» или [Agile manifesto](https://agilemanifesto.org/). Если вас когда-нибудь
спросят о том, знаете ли вы, что такое Agile, вы можете смело говорить, что знаете. Все
основные принципы и правила сформулированы именно в этом документе.

Важно отметить, что Agile-манифест не отрицает документацию и не считает
бесполезным согласование контрактов. В манифесте не отрицается важность того, что
справа, лишь больше ценится то, что слева. Agile представляет собой во многом идеологию
или набор ценностей. Если эти ценности разделяются, то вероятность того, что те или иные
легковесные практики будут использоваться в той или иной организации, оказывается
выше.

В нашем курсе мы посмотрим на [Scrum](https://scrumguides.org/) как на один из Agile фреймворков (важно помнить, что
Scrum – не единственная существующая реализация Agile). Перед прочтением следующих абзацев мы рекомендуем ознакомиться с
текстом оригинальном [Scrum Guide](https://scrumguides.org/docs/scrumguide/v2020/2020-Scrum-Guide-Russian.pdf) по
ссылке выше (это будет второй частью вашего домашнего задания).

В Scrum команде представлены следующие роли:

+ Developers;
+ Product Owner;
+ Scrum Master;

Мероприятия, в которых принимает участие команда:

+ Sprint;
+ Sprint Planning;
+ Daily Scrum;
+ Sprint Review;
+ Sprint Retrospective.

Артефакты Scrum:

+ Product backlog;
+ Sprint backlog;
+ Increment.

Отметим, что Scrum не разделяет Developers на непосредственно разработчиков и
тестировщиков. Предполагается, что команда кросс-функциональна. Поэтому, если в
рамках Daily Scrum выясняется, что кто-то из участников команды справился со своими
задачами, а у кого-то есть сложные задачи из области тестирования, свободные участники
могут помогать в тестировании независимо от своего «профиля».

В случае Scrum тестирование не выведено в какое-то отдельное событие. Тем не
менее, мы помним, что Sprint – это короткий временной интервал, после которого
появляется работающий инкремент. В рамках спринта над созданием инкремента работает
Developers группа. Мы также помним, что Scrum не делит Developers на «разработчиков» и
«тестировщиков». Как следствие, тестирование в рамках разработки по Scrum находится
практически в каждой точке спринта и остается неотъемлемой частью процесса.

## В непрерывной интеграции, поставке, развертывании

Появление гибких методологий стало одним из факторов, который повлиял на
запросы к скорости разработки ПО: сроки создания продуктов стали сокращаться, на
первый план стала выходить необходимость получения минимально работоспособной
версии как можно быстрее. Подобные запросы привели к появлению следующей группы
практик:

+ Непрерывная интеграция предполагает, что в момент внесения изменения в код,
  проект проходит сборку, а на созданной сборке выполняется запуск тестов. Если
  тесты проходят успешно, изменение в коде добавляется в основную ветку. Если
  тесты не проходят, то изменение откатывается, а разработчик дорабатывает код
  таким образом, чтобы тесты прошли.
+ Непрерывная поставка предполагает, что к основным тестам добавляются
  приемочные тесты, далее происходит развертывание в тестовое окружение, затем
  развертывание на production в ручном режиме, после чего выполняются smoke тесты
  (тесты на проверку базовой работоспособности).
+ Непрерывное развертывание в отличии от непрерывной поставки предполагает
  развертывание на production в автоматическом режиме. Остальные этапы процесса
  остаются неизменными.

В каждом из описанных подходов слово «тесты» встречается неоднократно.
Создание тестов и их загрузка в системы непрерывной интеграции, поставки или
развертывания становится крайне важным элементом описанных практик.

## В Test-Driven Development

Вспомним описанную ранее каскадную модель Винстона Ройса в том виде, в
котором ее запомнило большинство читавших статью (при этом помним, что на самом деле,
представлена была другая модель). В таком процессе тестирование выполняется после
кодирования. Тем не менее, перед тем, как начинается написание кода, разработчикам
доступен программный дизайн (известно, какой набор функциональности программа
должна нести в себе). Test driven development предполагает следующее: поскольку нам
известны ожидания от программы, мы можем предположить, как мы будем ее тестировать.
Тогда мы можем вначале создать тесты, а затем написать код таким образом, чтобы он
проходил тесты. Как следствие, процесс будет выглядеть следующим образом:

1. Добавить тест;
2. Запустить все тесты, включая добавленные. На этом шаге мы
   убеждаемся в том, что новые тесты перестают проходить;
3. Написать код;
4. Запустить тесты. Убедиться, что новые тесты проходят;
5. Провести рефакторинг;
6. Повторить цикл.
   Легко заметить, что в Test Driven Development тесты играют главную, управляющую
   роль.